# The Night is Young

Composer: [**Mason Victoria**](https://www.masonvictoriamusic.com/)

Mason was inspired by his first camp experience when he was a child. After growing up in the city he saw the stars clearly for the first time. Visually he was inspired by Memo Akten's fantastic [Learning to see: We are made of star dust (#2)](https://vimeo.com/242498070).

I had taken some nice footage of High Park cherry trees at night, so together with found footage of aurora borealis and stars, put together something that tries to match the wonder of seeing the night's sky at its most beautiful and colorful. The end of the song is really dynamic, so I was able to switch to something really colourful using GAN generated nebula. This also provided a nice opportunity to connect the manipulated colors of astrophotography and Mason's interest in synesthesia.

I made the most mistakes filming the musicians of this piece so I had a lot less material to work with than I hoped. It acted as a good constraint, forcing me to really find great Creative Commons footage.

The [SWAGAN](https://arxiv.org/abs/2102.06108)-based nebula generator was hooked up to Hans Brouwer's great [maua-stylegan2](https://github.com/JCBrouwer/maua-stylegan2) project (modified to accept SWAGAN models) that allows audio to shape the images generated by a GAN. There was a lot to learn about how to control it, and I just got the basics working in the time available, but the results were quite interesting and this is an area ripe for exploration.

I share Mason's nostalgia and awe of the night's sky. Here the eye imagery (generated by a GAN like the nebula) represents this wonder. A gaining of perspective through the sense of being on a giant but tiny planet rotating around a star in space, gazing out and ending the journey of billion year old photons from the deep vastness of space time. A perspective at once so diminishing and encompassing to make your own and every life in this cumulation of continued existence together as the most fortunate beings to ever live. This theme is a staple in science fiction, such as in [Alan Moore's](https://en.wikipedia.org/wiki/Watchmen) and [Larry Niven's](https://en.wikipedia.org/wiki/Ringworld) work.

Originally I had intended to use footage of stars projected onto Caleb while he played the bass solo. It had a really nice feel in our tests, but for a variety of reasons this didn't work out, so instead I used the [ReReVST](https://github.com/daooshee/ReReVST-Code) project to turn him and then Sarah into stars and nebulae. Similar to _Robbie's Hobbies_ I was quite frustrated with the video stylization results, but here they were more interesting and usable after a bit of video editing.

Mason and I are usually on the same wavelength, so this piece came together relatively easily, without a lot of discussion, often the case when working alongside an old friend.


## Source:

* [Videos, images and kdenlive project archive](https://spideroak.com/browse/share/SafeShare/Sound_Escapes_video_source)
  * Note: because of a [bug in kdenlive](https://bugs.kde.org/show_bug.cgi?id=439194) (as of v21.04.3) timeline clips of musicians (with greenscreens) may need to be disabled and re-enabled before they display correctly
* `source/code/`
  * A very ugly version of the maua-stylegan2 script used for audio-reactivity. This is unusable as is, and requires the separated audio, which is not under an open licence, but gives an example of what was used. I adjusted and played with parameters and settings for each clip.
* [Custom models](https://spideroak.com/browse/share/SafeShare/Sound_Escapes_video_source/archives/models/the_night_is_young)


## Notes:

The basic pipeline to create the nebula/iris effect:

1. Use [pyimagedata](https://github.com/RKelln/pyimgdata) to colect and crop training data.
2. Use all of those images as training data for SWAGAN. For example:
```shell
$ python prepare_data.py ../datasets/ --size 128,256,512 --resize five_crop --out ../datasets/nebula_cropped_512.lmdb

$ python train.py --size 512 --arch swagan --augment --batch 12 --n_sample 8 --save_every 2000 --wandb --project nebula --ckpt checkpoint/nebula/120000.pt ../datasets/nebula_cropped_512.lmdb/


$ python prepare_data.py ../datasets/mason_iris --size 128,256,512 --out ../datasets/iris_512.lmdb

$ python train.py --size 512 --arch swagan --augment --batch 12 --n_sample 8 --save_every 2000 --wandb --project iris ../datasets/iris_512.lmdb/

```
3. Select latents from the SWAGAN models. (Essentially selecting the textures I wanted to use in that section), for example:
```shell
$ python select_latents.py --ckpt ../rosinality-stylegan/checkpoint/nebula/190000.pt --arch swagan
```
4. Each section of the song edit the `maua_hot_bod.py` script to best match the desired audio-reactivity then run, for example, part of the bass solo:
```shell
$ python generate_audiovisual.py --ckpt ../rosinality-stylegan/checkpoint/nebula/190000.pt --audioreactive_file "audioreactive/examples/night_is_young.py" --duration 51 --offset 300 --out_size 512 --G_res 512 --arch swagan --batch 7 --audio_file data/audio/the_night_is_young.wav --latent_file workspace/nebula_190000_26_latents_ending.npy
```


## Footage:

  * Perseids Meteor Shower, Moon Close Up
    by [Beachfront B-Roll](http://www.beachfrontbroll.com/)

  * [Starry Sky Timelapse](https://www.youtube.com/watch?v=1vQBfrOK5d0)
    by Free HD Videos Creative Commons

  * [Northern lights // Aurora Borealis // Norrsken Time-lapse](https://www.youtube.com/watch?v=-5LupVNeMHA)
    by Richard Dobrichovsky

  * [Night Skies | Starry Night | Northern Lights | Relaxing Music](https://www.youtube.com/watch?v=eY_s5XJDAI0)
    by ariel dangani

  * [Algonquin Park Stars Timelapse](https://www.youtube.com/watch?v=1gwwgR7oNb4)
    by Paul Yip

  * [Milky Way Glowing At Night](https://vimeo.com/330059957)
    by Bilder David

  * [Stars in Space - Copyright Free Reusable Stock Video HD](https://www.youtube.com/watch?v=5yXWVS_bE_g)
    by Free Video Library - For Content Creators

  * [One night in Finnish Lapland with northern lights](https://www.youtube.com/watch?v=GuVq6Q7erVM)
    by AV LAPPI

  * [Timelapse video of star gazing on a starry night](https://www.pexels.com/video/time-lapse-video-of-star-gazing-on-a-starry-night-5155396/)
    by Dmitry Varennikov

  * [Just Another Milky Way](https://www.flickr.com/photos/160078282@N02/48125377358)
    by Hypatia Alexandria

  * Other footage by Ryan Kelln and Laura Soch


## Code/Tools:

  * [kdenlive](https://kdenlive.org)
    Open source video editor

  * [ffmpeg](http://ffmpeg.org/)
    Open source audio and video tool

  * [Consistent Video Style Transfer via Relaxation and Regularization](https://github.com/daooshee/ReReVST-Code)
    by Wenjing Wang, Shuai Yang, Jizheng Xu, and Jiaying Liu
    
  * [StyleGAN 2 in PyTorch](https://github.com/rosinality/stylegan2-pytorch)
    by Kim Seonghyeon
    
  * [maua-stylegan2]https://github.com/JCBrouwer/maua-stylegan2
    by Hans Brouwer
    
  * [Vidgear stabilize](https://github.com/abhiTronix)
    by Abhishek Thakur
    
  * [https://github.com/RKelln/pyimgdata](https://github.com/RKelln/pyimgdata)


## Sound Escapes

This piece is part of the [Sound Escapes concert](http://www.ryankelln.com/project/sound-escapes/) in collaboration with [Spectrum Music](https://www.spectrummusic.ca/).


## Licence

_The Night is Young_ visuals and code is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License. Please note that footage and code from other people and projects are licenced under their own licence. This includes the audio and composition for _The Night is Young_ that are licenced separately, copyright Spectrum Music and Mason Victoria, respectively.

You should have received a copy of the license along with this work. If not, see <http://creativecommons.org/licenses/by-sa/4.0/>.